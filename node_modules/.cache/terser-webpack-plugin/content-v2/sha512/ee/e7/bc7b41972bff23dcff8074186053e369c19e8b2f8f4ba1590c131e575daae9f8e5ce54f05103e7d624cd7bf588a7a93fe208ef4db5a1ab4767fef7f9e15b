{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{305:function(s,a,e){\"use strict\";e.r(a);var t=e(7),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"p\"),a(\"div\",{staticClass:\"table-of-contents\"},[a(\"ul\",[a(\"li\",[a(\"a\",{attrs:{href:\"#docker搭建3个节点的es集群\"}},[s._v(\"Docker搭建3个节点的ES集群\")]),a(\"ul\",[a(\"li\",[a(\"a\",{attrs:{href:\"#_1-本地创建docker节点的yml文件\"}},[s._v(\"1. 本地创建Docker节点的yml文件\")])]),a(\"li\",[a(\"a\",{attrs:{href:\"#_2-创建网桥\"}},[s._v(\"2. 创建网桥\")])]),a(\"li\",[a(\"a\",{attrs:{href:\"#_3-创建容器\"}},[s._v(\"3. 创建容器\")])]),a(\"li\",[a(\"a\",{attrs:{href:\"#_4-查看容器并启动\"}},[s._v(\"4. 查看容器并启动\")])]),a(\"li\",[a(\"a\",{attrs:{href:\"#_5-安装kibana\"}},[s._v(\"5. 安装kibana\")])]),a(\"li\",[a(\"a\",{attrs:{href:\"#_6-验证\"}},[s._v(\"6. 验证\")])])])])])]),a(\"p\"),s._v(\" \"),a(\"h2\",{attrs:{id:\"docker搭建3个节点的es集群\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker搭建3个节点的es集群\"}},[s._v(\"#\")]),s._v(\" Docker搭建3个节点的ES集群\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_1-本地创建docker节点的yml文件\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-本地创建docker节点的yml文件\"}},[s._v(\"#\")]),s._v(\" 1. 本地创建Docker节点的yml文件\")]),s._v(\" \"),a(\"p\",[s._v(\"创建3个文件，分别命名为node0.yml、node1.yml 和 node1.yml\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-ymal line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('cluster.name: yilyn-es-cluster\\n# node节点的名称，三个节点名称分别为node0、node1、node2\\nnode.name: node0\\nnetwork.host: 0.0.0.0\\n# 外部访问es的端口，三个节点都是9200，因为是不同的容器，没有影响\\nhttp.port: 9200\\n\\n# 节点之间通讯的端口，三个节点都是9300，因为是不同的容器，没有影响\\ntransport.tcp.port: 9300\\n\\n# 各个节点的ip与通讯端口，节点内部通过tcp互相通信，因为在同一个宿主机下，可以使用【容器名:端口】的方式在docker内部访问\\ndiscovery.seed_hosts: [\"es-node0:9300\",\"es-node1:9300\",\"es-node2:9300\"]\\n \\n# 初始祝节点，默认设置为node0\\ncluster.initial_master_nodes: [\"node0\"]\\nbootstrap.system_call_filter: false\\nbootstrap.memory_lock: false\\nhttp.cors.enabled: true\\nhttp.cors.allow-origin: \"*\"\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"_2-创建网桥\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-创建网桥\"}},[s._v(\"#\")]),s._v(\" 2. 创建网桥\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 创建名为 elastic 的网桥，所有节点可以通过网桥形成集群\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" network create elastic\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"_3-创建容器\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-创建容器\"}},[s._v(\"#\")]),s._v(\" 3. 创建容器\")]),s._v(\" \"),a(\"p\",[a(\"strong\",[s._v(\"node0节点容器创建\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" create \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--name\")]),s._v(\" es-node0 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--net\")]),s._v(\" elastic \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9300\")]),s._v(\":9300 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p9200:9200\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-v\")]),s._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node0.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-t\")]),s._v(\" elasticsearch:7.6.2\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[s._v(\"node1节点容器创建\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" create \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--name\")]),s._v(\" es-node1 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--net\")]),s._v(\" elastic \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9301\")]),s._v(\":9301 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p9201:9201\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-v\")]),s._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node1.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-t\")]),s._v(\" elasticsearch:7.6.2\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[s._v(\"node2节点容器创建\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" create \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--name\")]),s._v(\" es-node2 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--net\")]),s._v(\" elastic \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"9302\")]),s._v(\":9302 \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p9202:9202\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-v\")]),s._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node2.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-t\")]),s._v(\" elasticsearch:7.6.2\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"_4-查看容器并启动\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-查看容器并启动\"}},[s._v(\"#\")]),s._v(\" 4. 查看容器并启动\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"/images/docker/es-cluster-container.png\",alt:\"es-cluster-container.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"上图列表中就是刚才创建的3个es节点容器，接下来就是启动这三个es容器了\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_5-安装kibana\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-安装kibana\"}},[s._v(\"#\")]),s._v(\" 5. 安装kibana\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 拉取镜像\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" pull kibana:7.6.2\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 运行镜像，需要和es的三个节点使用同一个网桥，相当于在同一个局域网下\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" run \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--name\")]),s._v(\" es-cluster-kibana \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"--net\")]),s._v(\" elastic \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-p\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5601\")]),s._v(\":5601 kibana:7.6.2\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"p\",[s._v(\"kibana启动后要修改kibana.yml的配置文件，才能连接到3个es节点上\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入kibana容器\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exec\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[s._v(\"-it\")]),s._v(\" kibana容器ID \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 修改kibana.yml\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" config/kibana.yml\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将下面的配置改成es节点对应的IP+端口，因为是同一个网桥下，所以可以使用【容器名:端口】的方式\")]),s._v(\"\\nelasticsearch.hosts: \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://es-node0:9200\"')]),s._v(\",\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://es-node1:9200\"')]),s._v(\",\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://es-node2:9200\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 保存并退出，然后重启kibana容器\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"docker\")]),s._v(\" restart 容器ID\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\")])]),a(\"h3\",{attrs:{id:\"_6-验证\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-验证\"}},[s._v(\"#\")]),s._v(\" 6. 验证\")]),s._v(\" \"),a(\"p\",[s._v(\"访问kibana, http://localhost:5601 顺利进入kibana说明集群搭建成功\")])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}