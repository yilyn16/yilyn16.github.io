{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{301:function(a,s,e){\"use strict\";e.r(s);var t=e(7),n=Object(t.a)({},(function(){var a=this,s=a._self._c;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[s(\"p\"),s(\"div\",{staticClass:\"table-of-contents\"},[s(\"ul\",[s(\"li\",[s(\"a\",{attrs:{href:\"#docker搭建3个节点的es集群\"}},[a._v(\"Docker搭建3个节点的ES集群\")]),s(\"ul\",[s(\"li\",[s(\"a\",{attrs:{href:\"#_1-本地创建docker节点的yml文件\"}},[a._v(\"1. 本地创建Docker节点的yml文件\")])]),s(\"li\",[s(\"a\",{attrs:{href:\"#_2-创建网桥\"}},[a._v(\"2. 创建网桥\")])]),s(\"li\",[s(\"a\",{attrs:{href:\"#_3-创建容器\"}},[a._v(\"3. 创建容器\")])]),s(\"li\",[s(\"a\",{attrs:{href:\"#_4-查看容器并启动\"}},[a._v(\"4. 查看容器并启动\")])]),s(\"li\",[s(\"a\",{attrs:{href:\"#_5-安装kibana\"}},[a._v(\"5. 安装kibana\")])]),s(\"li\",[s(\"a\",{attrs:{href:\"#_6-访问kibana-http-localhost-5601-顺利进入kibana说明集群搭建成功\"}},[a._v(\"6. 访问kibana, http://localhost:5601 顺利进入kibana说明集群搭建成功\")])])])])])]),s(\"p\"),a._v(\" \"),s(\"h2\",{attrs:{id:\"docker搭建3个节点的es集群\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker搭建3个节点的es集群\"}},[a._v(\"#\")]),a._v(\" Docker搭建3个节点的ES集群\")]),a._v(\" \"),s(\"h3\",{attrs:{id:\"_1-本地创建docker节点的yml文件\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-本地创建docker节点的yml文件\"}},[a._v(\"#\")]),a._v(\" 1. 本地创建Docker节点的yml文件\")]),a._v(\" \"),s(\"p\",[a._v(\"创建3个文件，分别命名为node0.yml、node1.yml 和 node1.yml\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-ymal line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[a._v('cluster.name: yilyn-es-cluster\\n# node节点的名称，三个节点名称分别为node0、node1、node2\\nnode.name: node0\\nnetwork.host: 0.0.0.0\\n# 外部访问es的端口，三个节点都是9200，因为是不同的容器，没有影响\\nhttp.port: 9200\\n\\n# 节点之间通讯的端口，三个节点都是9300，因为是不同的容器，没有影响\\ntransport.tcp.port: 9300\\n\\n# 各个节点的ip与通讯端口，节点内部通过tcp互相通信，因为在同一个宿主机下，可以使用【容器名:端口】的方式在docker内部访问\\ndiscovery.seed_hosts: [\"es-node0:9300\",\"es-node1:9300\",\"es-node2:9300\"]\\n \\n# 初始祝节点，默认设置为node0\\ncluster.initial_master_nodes: [\"node0\"]\\nbootstrap.system_call_filter: false\\nbootstrap.memory_lock: false\\nhttp.cors.enabled: true\\nhttp.cors.allow-origin: \"*\"\\n')])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"16\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"17\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"18\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"19\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"_2-创建网桥\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-创建网桥\"}},[a._v(\"#\")]),a._v(\" 2. 创建网桥\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 创建名为 elastic 的网桥，所有节点可以通过网桥形成集群\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" network create elastic\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"2\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"_3-创建容器\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-创建容器\"}},[a._v(\"#\")]),a._v(\" 3. 创建容器\")]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"node0节点容器创建\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" create \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--name\")]),a._v(\" es-node0 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--net\")]),a._v(\" elastic \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"9300\")]),a._v(\":9300 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p9200:9200\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-v\")]),a._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node0.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-t\")]),a._v(\" elasticsearch:7.6.2\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\")])]),s(\"p\",[s(\"strong\",[a._v(\"node1节点容器创建\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" create \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--name\")]),a._v(\" es-node1 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--net\")]),a._v(\" elastic \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"9301\")]),a._v(\":9301 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p9201:9201\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-v\")]),a._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node1.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-t\")]),a._v(\" elasticsearch:7.6.2\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\")])]),s(\"p\",[s(\"strong\",[a._v(\"node2节点容器创建\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" create \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--name\")]),a._v(\" es-node2 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--net\")]),a._v(\" elastic \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"9302\")]),a._v(\":9302 \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p9202:9202\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-v\")]),a._v(\" /Users/yanglin/Documents/Dockerfile/es-cluster/node2.yml:/usr/share/elasticsearch/config/elasticsearch.yml \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-t\")]),a._v(\" elasticsearch:7.6.2\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"_4-查看容器并启动\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-查看容器并启动\"}},[a._v(\"#\")]),a._v(\" 4. 查看容器并启动\")]),a._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"/images/docker/es-cluster-container.png\",alt:\"es-cluster-container.png\"}})]),a._v(\" \"),s(\"p\",[a._v(\"上图列表中就是刚才创建的3个es节点容器，接下来就是启动这三个es容器了\")]),a._v(\" \"),s(\"h3\",{attrs:{id:\"_5-安装kibana\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-安装kibana\"}},[a._v(\"#\")]),a._v(\" 5. 安装kibana\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 拉取镜像\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" pull kibana:7.6.2\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 运行镜像，需要和es的三个节点使用同一个网桥，相当于在同一个局域网下\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" run \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--name\")]),a._v(\" es-cluster-kibana \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"--net\")]),a._v(\" elastic \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-p\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"5601\")]),a._v(\":5601 kibana:7.6.2\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"5\")]),s(\"br\")])]),s(\"p\",[a._v(\"kibana启动后要修改kibana.yml的配置文件，才能连接到3个es节点上\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 进入kibana容器\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[a._v(\"exec\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token parameter variable\"}},[a._v(\"-it\")]),a._v(\" kibana容器ID \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"sh\")]),a._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 修改kibana.yml\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"vi\")]),a._v(\" config/kibana.yml\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 将下面的配置改成es节点对应的IP+端口，因为是同一个网桥下，所以可以使用【容器名:端口】的方式\")]),a._v(\"\\nelasticsearch.hosts: \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"[\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"http://es-node0:9200\"')]),a._v(\",\"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"http://es-node1:9200\"')]),a._v(\",\"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"http://es-node2:9200\"')]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"]\")]),a._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[a._v(\"# 保存并退出，然后重启kibana容器\")]),a._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[a._v(\"docker\")]),a._v(\" restart 容器ID\\n\")])]),a._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[a._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[a._v(\"11\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"_6-访问kibana-http-localhost-5601-顺利进入kibana说明集群搭建成功\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6-访问kibana-http-localhost-5601-顺利进入kibana说明集群搭建成功\"}},[a._v(\"#\")]),a._v(\" 6. 访问kibana, http://localhost:5601 顺利进入kibana说明集群搭建成功\")])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}